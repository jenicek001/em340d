# Environment variables for EM340D Docker deployment
# Copy this file to .env and customize with your settings

# MQTT Broker Configuration
# For Docker deployment: use 'localhost' with host networking, or host's IP address
# Examples:
#   MQTT_BROKER=localhost          # With network_mode: host in docker-compose.yml
#   MQTT_BROKER=192.168.1.100      # Host IP address (most reliable)
#   MQTT_BROKER=host.docker.internal  # Special Docker hostname (newer versions)
MQTT_BROKER=localhost
MQTT_PORT=1883
MQTT_USERNAME=
MQTT_PASSWORD=
MQTT_TOPIC=em340

# Serial Device Configuration  
# Specify the USB-Serial device path for your RS485 adapter
# Common devices: /dev/ttyUSB0 (CH340), /dev/ttyACM0 (FTDI), /dev/ttyAMA0 (Raspberry Pi GPIO)
# Use stable device path by ID (recommended) or direct device path
#
# To find your device:
#   ls -l /dev/ttyUSB* /dev/ttyACM*
#   ls -l /dev/serial/by-id/
#
# Examples:
#   SERIAL_DEVICE=/dev/serial/by-id/usb-1a86_USB_Single_Serial_56EC017080-if00  # Stable ID (recommended)
#   SERIAL_DEVICE=/dev/ttyACM0   # FTDI USB-Serial adapters
#   SERIAL_DEVICE=/dev/ttyUSB0   # CH340 USB-Serial adapters
#
# NOTE: With privileged mode in docker-compose.yml, the container can access any
#       device. Just change this value for different machines - no docker-compose.yml changes needed!
SERIAL_DEVICE=/dev/ttyUSB0
MODBUS_ADDRESS=1

# EM340 Device Identification
# Carlo Gavazzi EM340 serial number - used as MQTT subtopic
# Format: 6 digits + 1 letter (e.g., "235411W")
# You can find this on the EM340 device label
DEVICE_SERIAL_NUMBER=235411W

# Legacy parameter (kept for backward compatibility)
DEVICE_NAME=EM340

# Application Configuration
LOG_LEVEL=INFO
DELAY_MS=50

# Optional: Timezone (for log timestamps)
TZ=UTC

# MQTT Configuration Feature (NEW)
# Enable remote configuration of EM340 parameters via MQTT
# Configuration topics: {MQTT_TOPIC}/{DEVICE_SERIAL_NUMBER}/config/
# Examples:
#   em340/235411W/config/measurement_mode/set
#   em340/235411W/config/measuring_system/get
#   em340/235411W/config/batch/set
# See MQTT_CONFIGURATION.md for complete documentation

# Docker User Configuration (automatically detected)
# These variables allow the container to run with proper host user permissions
# Run: id to see your current user ID and group ID
USER_ID=1000
GROUP_ID=1000
DIALOUT_GID=20
